# Техническое задание: Beauty Tech Multi-Site Platform

## 1. Общее описание проекта

### 1.1 Назначение
Создание мультитенантной платформы для управления 4 сайтами косметических брендов в едином монорепозитории. BTT является центральной точкой входа и дает ссылки на три бренда: AQ, Sciton, Indiba. E-commerce функционал с разделением на B2B и B2C сегменты реализован **только на сайте AQ**. B2B кабинет врача доступен **только на сайте AQ**.

### 1.2 Целевые сайты
1. **BTT** - зонтичный одностраничный сайт (one-page). Без e-commerce и без B2B-кабинета. Только форма обратной связи.
2. **AQ Skin Solutions** - продуктовый сайт с контентом + e-commerce. Единственный сайт с B2B/B2C продажами и B2B кабинетом врача.
3. **Sciton** - сайт-визитка (минимум страниц, без продаж)
4. **Indiba** - сайт-визитка (минимум страниц, без продаж)

### 1.3 Основные требования
- Монорепозиторий с общей кодовой базой
- Единая база данных с мультитенантностью (разделение по `site_id`)
- Общие компоненты и утилиты
- Индивидуальная стилизация для каждого сайта
- Поддержка двух языков: **немецкий (DE) - основной** и **английский (EN)** - через плагин перевода
- BTT является центральной точкой входа и дает ссылки на три бренда: AQ, Sciton, Indiba
- Каждый бренд ведет на отдельный сайт/раздел (отдельный домен или поддомен - на усмотрение разработки)
- Мероприятия могут отображаться на BTT и дублироваться на брендовых сайтах (AQ/Sciton/Indiba) с релевантным акцентом

### 1.4 Референсы и дизайн
- **Sciton:** https://sciton.uk/sciton-international/ (референс)
- **AQ:** https://www.aqskinsolutions.pl/distributors (референс)
- **Indiba:** https://indiba.com/us (референс)
- **AQ (магазин):** Свой дизайн (не копирование)
- **Sciton, Indiba, BTT:** Семплы/копирование стиля из референсов

---

## 2. Архитектура системы

### 2.1 Структура проекта

```
COSMETIC/
├── apps/
│   ├── btt/              # BTT зонтичный one-page (без e-commerce)
│   ├── aq/               # AQ Skin Solutions (e-commerce + B2B кабинет)
│   ├── sciton/           # Sciton визитка
│   └── indiba/           # Indiba визитка
├── packages/
│   ├── shared/           # Общие компоненты, утилиты
│   ├── ui/               # shadcn/ui компоненты
│   ├── database/         # Supabase схемы, типы
│   ├── config/           # Конфиги сайтов
│   └── lib/              # Общие библиотеки
├── supabase/
│   ├── migrations/       # SQL миграции
│   └── functions/        # Edge Functions
└── docs/                 # Документация
```

### 2.2 Архитектурные принципы
- **Монорепозиторий:** Общая кодовая база для всех сайтов
- **Мультитенантность:** Разделение данных по `site_id` в единой БД
- **Общие компоненты:** Переиспользуемые UI компоненты и утилиты в `/shared`
- **B2B кабинет:** Доступен только на сайте AQ
- **E-commerce:** Реализован только на сайте AQ
- **Единая админ-панель:** Одна панель управления для всех сайтов
- **Связность:** Мероприятия могут отображаться на BTT и дублироваться на брендовых сайтах (AQ/Sciton/Indiba)

---

## 3. Технический стек

### 3.1 Frontend
- **Framework:** Next.js 15 (App Router)
- **UI библиотека:** React 19
- **Язык:** TypeScript
- **UI компоненты:** shadcn/ui, Radix UI
- **Стилизация:** Tailwind CSS
- **Интернационализация:** next-intl

### 3.2 Backend
- **База данных:** Supabase (PostgreSQL)
- **Аутентификация:** Supabase Auth
- **Безопасность:** Row Level Security (RLS)
- **Хранилище файлов:** Supabase Storage
- **Serverless функции:** Supabase Edge Functions

### 3.3 Интеграции
- **Платежи:** Stripe (карты, Apple Pay, Google Pay, Klarna), PayPal, SEPA
- **Доставка:** DHL API, Sendcloud API
- **Email:** Resend
- **Переводы:** Плагин перевода (автоматический перевод на английский)
- **Аналитика:** Google Analytics 4, BigQuery
- **CRM:** Интеграция возможна в будущем (пока не требуется)

### 3.4 Инструменты разработки
- **Тестирование:** Playwright (E2E), Vitest (Unit)
- **Деплой:** Vercel
- **Монорепозиторий:** Turborepo или pnpm workspaces

---

## 4. Функциональные требования

### 4.1 Пользовательские роли

#### 4.1.1 B2C пользователи (обычные покупатели) - только на сайте AQ
- Просмотр каталога товаров (только доступных для B2C)
- Просмотр страниц товаров
- Добавление товаров в корзину
- Использование промокодов
- Оформление заказа с оплатой через Stripe (без регистрации/личного кабинета)
- Получение email-уведомлений о заказе
- Гостевой чек-аут: покупка без регистрации

#### 4.1.2 B2B пользователи (врачи) - только на сайте AQ
- Регистрация врача через форму с модерацией/подтверждением
- Доступ к специальным B2B ценам (только после одобрения)
- Доступ к закрытым карточкам/материалам
- Просмотр истории заказов в личном кабинете
- Оформление заказа с оплатой по счету (требует модерации)
- Загрузка чеков/договоров после заказа
- Функция "Повторить заказ" (one-click)
- Получение автоматических напоминаний о повторном заказе
- Статусы аккаунта: 'на модерации' → 'одобрен' → 'отклонен'

#### 4.1.3 Администраторы
- Управление товарами (CRUD)
- Управление коллекциями
- Управление ценами (B2B/B2C)
- Управление промокодами
- CSV импорт/экспорт товаров
- Модерация B2B заказов
- Просмотр всех заказов по всем сайтам

### 4.2 Система цен

#### 4.2.1 Разделение цен
- Каждый товар имеет две цены: `price_b2c` и `price_b2b`
- B2C пользователи видят только B2C цены
- B2B пользователи видят только B2B цены
- Цены скрыты через RLS политики в БД

#### 4.2.2 Отображение цен
- Динамическое отображение цены в зависимости от роли пользователя
- Middleware для определения роли пользователя
- Компонент `PriceDisplay` для унифицированного отображения

### 4.3 Корзина покупок

#### 4.3.1 Функционал корзины
- Добавление товаров в корзину
- Отображение товаров в корзине
- Изменение количества товаров
- Удаление товаров из корзины
- Сохранение корзины:
  - В localStorage для неавторизованных пользователей
  - В БД для авторизованных пользователей

#### 4.3.2 Расчет доставки
- Интеграция с **DHL** и **Sendcloud**
- Стоимость доставки: **6.99€** (единая цена) для заказов менее **300€**
- Бесплатная доставка для заказов от **300€**
- Отображение стоимости доставки в корзине

#### 4.3.3 Промокоды
- Применение промокодов **только для B2C пользователей** (физ.лиц)
- Валидация промокодов
- Расчет скидки

#### 4.3.4 Важные ограничения
- **Без лимита товаров в заказе** - можно добавлять любое количество позиций
- **Товары в корзине НЕ блокируются на складе** - резервирование происходит только после успешного оформления заказа

### 4.4 Оформление заказа (Checkout)

#### 4.4.1 Страница оформления заказа
- Форма с данными покупателя
- Выбор способа доставки
- Выбор способа оплаты
- Итоговая стоимость заказа

#### 4.4.2 Способы оплаты

**Для B2C:**
- Stripe Checkout с поддержкой:
  - Банковские карты
  - Apple Pay
  - Google Pay
  - Klarna
- PayPal
- SEPA

**Для B2B:**
- Оплата по счету (требует модерации администратором)
- Создание заказа со статусом "Ожидает оплаты"
- **Инвойсы PDF не нужны** - достаточно email order confirmation

#### 4.4.3 Создание заказа
- Сохранение заказа в БД после успешной оплаты
- Отправка email-уведомления о заказе
- Обновление статуса заказа через Stripe webhook

### 4.5 Личный кабинет B2B

#### 4.5.1 Dashboard
- Обзор статистики заказов
- Последние заказы
- Быстрые действия
- **Инвойсы PDF не отображаются** - достаточно email order confirmation

#### 4.5.2 История заказов
- Список всех заказов пользователя (только на сайте AQ)
- Детали каждого заказа
- Статусы заказов
- Трекинг доставки
- Номер заказа, дата, статус, состав, сумма, счет/инвойс

#### 4.5.3 Повтор заказа
- Кнопка "Повторить заказ" для каждого заказа
- One-click добавление всех товаров из заказа в корзину
- Автоматический переход на страницу checkout

#### 4.5.4 Загрузка файлов
- Возможность загрузить чек/договор после заказа
- Хранение файлов в Supabase Storage
- Отображение загруженных файлов в админ-панели
- **Отправка пользовательского соглашения после размещения заказа**

### 4.6 Админ-панель

#### 4.6.1 Управление товарами
- Создание нового товара
- Редактирование товара
- Удаление товара
- Управление изображениями товаров
- Управление описаниями и характеристиками
- **Обновление товаров и коллекций заказчиком самостоятельно**
- **Админ-панель обязательна** (CSV импорт/экспорт как дополнительная опция)

#### 4.6.2 Управление коллекциями
- Создание коллекций товаров
- Редактирование коллекций
- Удаление коллекций
- Привязка товаров к коллекциям

#### 4.6.3 Управление ценами
- Установка B2C цены
- Установка B2B цены
- Массовое редактирование цен

#### 4.6.4 Управление промокодами
- Создание промокодов
- Установка скидки
- Установка условий применения
- Деактивация промокодов

#### 4.6.5 CSV импорт/экспорт
- Импорт товаров из CSV файла
- Экспорт товаров в CSV файл
- Валидация данных при импорте

#### 4.6.6 Модерация B2B заказов
- Просмотр всех B2B заказов
- Изменение статуса заказа
- Одобрение заказов на оплату по счету
- Просмотр загруженных файлов (чеки/договоры)

### 4.7 Интеграция доставки

#### 4.7.1 Расчет стоимости доставки
- Интеграция с DHL/Sendcloud API
- Автоматический расчет стоимости на основе адреса доставки
- Отображение стоимости в корзине и на checkout

#### 4.7.2 Трекинг заказов
- Получение трек-номера от службы доставки
- Отображение статуса доставки в личном кабинете
- Автоматическое обновление статусов через webhook

### 4.8 Email уведомления

#### 4.8.1 Типы уведомлений
- **Подтверждение заказа:** Отправка сразу после создания заказа
- **Напоминание о повторном заказе:** Автоматическая отправка через 1 месяц после заказа (только для B2B)

#### 4.8.2 Технические требования
- Использование Resend для отправки email
- HTML шаблоны для писем
- Поддержка DE/EN языков в письмах

### 4.9 Интернационализация (i18n)

#### 4.9.1 Поддерживаемые языки
- **Немецкий (DE) - основной язык** для всех сайтов
- **Английский (EN)** - через плагин перевода

#### 4.9.2 Функционал
- Переключение языка на сайте
- Переводчик/плагин для автоматического перевода на английский
- Переводы всех текстов интерфейса
- Тексты предоставляются заказчиком

### 4.10 SEO и Legal страницы

#### 4.10.1 SEO оптимизация
- **Карта ключевых слов:** для каждой страницы/категории/карточки — целевой запрос(ы) и H1/Title/Description
- **ЧПУ (URL) структура:** логичная, короткая, без дублей; отдельные URL для публикаций, Q&A, продуктов
- **Мета-теги:** Title/Description/OG для соцсетей; шаблоны для карточек и статей
- **Schema.org разметка:** Product (для товаров), Article (для публикаций), FAQ (для Q&A) — где применимо
- **Sitemap.xml:** автоматическая генерация для каждого сайта
- **robots.txt:** настройка индексации (закрыть служебные страницы, кабинет, корзина/checkout по необходимости)
- **Canonical URLs:** устранение дублей (особенно в e-commerce)
- **Внутренняя перелинковка:** продукты ↔ публикации ↔ Q&A (усиление релевантности)
- **Оптимизация изображений:** WebP формат, сжатие
- **Редиректы:** при изменении URL и контроль 404

#### 4.10.2 Legal страницы (обязательно)
- **Политика конфиденциальности (GDPR):** какие данные собираем (формы/заказы/кабинет врача), цели обработки, сроки хранения, права пользователя, контакты DPO/контакт для запросов
- **Cookies Policy:** перечень категорий cookies (необходимые/аналитика/маркетинг), управление согласием, ссылка из футера и баннера
- **Terms & Conditions:** условия использования сайта (для AQ и, при необходимости, для BTT)
- **Условия продажи:** отдельные условия для B2C и B2B (если отличаются: оплата, доставка, ответственность)
- **Политика возврата/отмены/рефанда (B2C):** сроки и процедура
- **Imprint/Legal notice:** юрлицо, адрес, контакты, рег.данные (если требуется по юрисдикции)
- **Формы:** обязательно checkbox согласия + ссылки на политики

#### 4.10.3 Дополнительно
- Cookie consent (согласие на использование cookies) - CMP для GDPR (баннер, категории cookies, хранение согласий)
- 404 страница с навигацией

### 4.11 Аналитика

#### 4.11.1 Google Analytics 4 и BigQuery
- Интеграция **GA4** на все сайты
- E-commerce события (просмотр товара, добавление в корзину, покупка) - только для AQ
- Трекинг конверсий
- **Экспорт данных в BigQuery**
- Другие аналитические инструменты (Яндекс.Метрика, Hotjar) - не требуются на старте

---

## 4.12 Описание сайтов

### 4.12.1 BTT (зонтичный одностраничный сайт)

**Формат:** One-page (одна страница)  
**Цель:** Представить компанию, основателя, бренды и мероприятия; собрать заявки/обратную связь  
**Функционал:** Форма обращения (lead form)

**Важно:** BTT не содержит B2B-кабинет и не содержит e-commerce.

#### Блоки страницы:
- **Кто мы (кратко):** Beauty Technology Trade, сфера (эстетическая медицина), с кем работаем (врачи/клиники/партнеры)
- **Основатель:** Анна Жарова (кратко: медицинский и международный опыт)
- **Бренды (3 карточки/плашки):** AQ, Sciton, Indiba (каждая ведет на свой сайт)
- **Мероприятия:** список/лента (календарь или карточки)
- **Связаться с нами:** форма + контакты

#### Форма "Связаться с нами":
- Имя и фамилия
- E-mail
- Телефон (опционально)
- Роль: врач / клиника / партнер / другое
- Интересующий бренд/технология: AQ / Sciton / Indiba (или список технологий)
- Сообщение (свободное поле)
- **Загрузка файлов** (чек/договор при необходимости)
- Согласие с политикой конфиденциальности (checkbox)
- **Стандартные поля:** дата, имя, артикул, товар, сумма, company legal entity details (для B2B)
- **Автоматическая отправка:** email уведомления (CRM интеграция возможна в будущем)

### 4.12.2 AQ Skin Solutions (продуктовый сайт + e-commerce)

**Референс:** https://www.aqskinsolutions.pl/distributors  
**Функции:** Контент (публикации, Q&A), каталог, e-commerce, B2B кабинет врача, B2C магазин без личного кабинета

**Дизайн:** Свой дизайн (не копирование референса)

#### Разделы сайта:
- Главная
- Продукты (10 карточек - обязательно)
- Публикации
- Вопросы-ответы (Q&A)
- B2B кабинет врача (регистрация/авторизация/заказы)
- B2C магазин (разовые покупки, без личного кабинета)
- Контакты
- Юридические страницы (политика конфиденциальности и др.)

#### Продукты: 10 карточек (обязательно)
На сайте должно быть ровно 10 карточек продуктов. Доступность для покупки может отличаться (часть для B2C, часть только для B2B).

**Требования к карточкам продуктов:**
- Два режима доступности: (1) доступно B2C, (2) только для B2B (видимость цены/кнопки покупки зависит от статуса)
- Логика видимости: для гостей показываем описание и базовую информацию; B2B-цены и B2B-покупка — только после авторизации врача
- Если продукт недоступен B2C: вместо 'Купить' — CTA 'Запросить у врача/Связаться' или 'Только для специалистов'
- Единые обязательные блоки карточки: название, краткое описание (для кого/зачем), состав/активные компоненты, способ применения, формат/объем, противопоказания/предупреждения, условия хранения, FAQ по продукту (если нужно), документы/сертификаты (если предусмотрено)
- Блок доверия/комплаенса: отметки 'для профессионального применения' где нужно, юридические дисклеймеры, ссылки на политику/условия
- Связанные материалы: ссылки на публикации/вопросы-ответы, относящиеся к конкретному продукту (внутренняя перелинковка)
- Фото/визуал: единый стандарт изображений (размеры, фон, набор ракурсов)

#### B2B кабинет врача (только на AQ)
- Регистрация врача через форму: ФИО, клиника, страна/город, e-mail, телефон, специализация, подтверждающие данные (лицензия/сайт/ИНН и т.п.)
- Статусы аккаунта: 'на модерации' → 'одобрен' → 'отклонен' (с автоматическими уведомлениями по e-mail)
- После одобрения — доступ к B2B-ценам, B2B-ассортименту, корзине/заказам
- История заказов для B2B (минимум: номер, дата, статус, состав, сумма, счет/инвойс)
- Возможность выставления счета (invoice) для B2B
- Разграничение контента: закрытые материалы/карточки/цены видны только авторизованным B2B пользователям

#### B2C магазин (без личного кабинета)
- Гостевой чек-аут: покупка без регистрации/кабинета
- Минимальный набор полей: имя, e-mail, телефон (опционально), адрес доставки, способ доставки, способ оплаты
- Уведомления: подтверждение заказа, подтверждение оплаты, уведомление об отправке (трек-номер), статусные письма
- Ограничение ассортимента: товары, недоступные B2C, должны быть убраны из B2C покупки (или иметь явную маркировку и отключенную покупку)

#### Публикации
- Раздел с материалами/статьями
- Структура по референсу польского сайта
- Типы публикаций, фильтры, теги

#### Вопросы-ответы (Q&A)
- Раздел FAQ для врачей и пациентов
- Структура и подача по референсу польского сайта
- Категории и вопросы

### 4.12.3 Sciton (сайт-визитка)

**Тип:** Сайт-визитка. Без e-commerce. Контент на основе международного сайта.

**Референс:** https://sciton.uk/sciton-international/

**Разделы:**
- Главная
- О бренде
- **Технологии:** одна страница про технологии с видео-роликами и описанием технологии
- Мероприятия
- Контакты
- Юридические страницы (если требуются)

**Дизайн:** Семплы/копирование стиля из референса

### 4.12.4 Indiba (сайт-визитка)

**Тип:** Сайт-визитка. Без e-commerce. Контент на основе международного сайта.

**Референс:** https://indiba.com/us

**Разделы:**
- Главная
- О технологии
- Показания/применение (кратко)
- Мероприятия
- Контакты
- Юридические страницы (если требуются)

**Дизайн:** Семплы/копирование стиля из референса

---

## 5. Требования к базе данных

### 5.1 Основные таблицы

#### 5.1.1 sites
- Хранение информации о сайтах (BTT, AQ, Sciton, Indiba)
- Поля: `id`, `name`, `domain`, `config`

#### 5.1.2 users
- Расширенная таблица пользователей Supabase Auth
- Поля: `id`, `email`, `role` (b2c/b2b/admin), `site_id`, `status` (pending/approved/rejected для B2B), `clinic_name`, `specialization`, `license_data`

#### 5.1.3 products
- Каталог товаров (только для сайта AQ)
- Поля: `id`, `site_id`, `name`, `slug`, `description`, `images`, `price_b2c`, `price_b2b`, `stock`, `status`, `available_b2c`, `available_b2b`

#### 5.1.4 collections
- Коллекции товаров (только для сайта AQ)
- Поля: `id`, `site_id`, `name`, `slug`, `description`

#### 5.1.5 orders
- Заказы (только для сайта AQ)
- Поля: `id`, `site_id`, `user_id`, `status`, `payment_method`, `shipping_address`, `total`, `created_at`, `invoice_url`

#### 5.1.6 order_items
- Товары в заказе
- Поля: `id`, `order_id`, `product_id`, `quantity`, `price`

#### 5.1.7 promocodes
- Промокоды (только для сайта AQ, только для B2C)
- Поля: `id`, `code`, `discount`, `valid_from`, `valid_until`, `active`

#### 5.1.8 contact_forms
- Формы обратной связи (для BTT)
- Поля: `id`, `site_id`, `name`, `email`, `phone`, `role`, `interested_brand`, `message`, `created_at`, `status`

#### 5.1.9 events
- Мероприятия (могут отображаться на BTT и дублироваться на брендовых сайтах)
- Поля: `id`, `site_id`, `title`, `description`, `date`, `location`, `link`, `image`, `created_at`

#### 5.1.10 publications
- Публикации/статьи (только для сайта AQ)
- Поля: `id`, `site_id`, `title`, `slug`, `content`, `excerpt`, `author`, `published_at`, `tags`, `related_products`

#### 5.1.11 faq
- Вопросы-ответы (только для сайта AQ)
- Поля: `id`, `site_id`, `question`, `answer`, `category`, `order`, `related_products`

### 5.2 Row Level Security (RLS)
- Все таблицы защищены RLS политиками
- Разделение данных по `site_id`
- B2B цены скрыты от B2C пользователей
- Доступ к админ-панели только для администраторов

---

## 6. Этапы разработки

### Этап 1: Прототип (Дни 1-3)
**Цель:** Создать базовую структуру проекта и прототип одного сайта

**Задачи:**
1. Инициализация монорепозитория Next.js 15
2. Настройка TypeScript, ESLint, Prettier
3. Настройка Supabase проекта
4. Создание базовой схемы БД
5. Базовые страницы для AQ (главная, каталог, товар, авторизация)
6. B2B кабинет MVP (dashboard, список заказов)

**Результат:** Live-демо на Vercel с каталогом и B2B кабинетом

### Этап 2: MVP E-commerce (Дни 4-10)
**Цель:** Реализовать полный цикл покупки

**Задачи:**
1. Система цен (B2B/B2C)
2. Корзина покупок
3. Checkout с интеграцией Stripe
4. Email уведомления через Resend

**Результат:** Полный цикл покупки B2C и B2B

### Этап 3: Полный функционал (Дни 11-15)
**Цель:** Реализовать все основные функции платформы

**Задачи:**
1. Админ-панель (CRUD товаров, промокоды, CSV импорт/экспорт)
2. Интеграция доставки (DHL/Sendcloud)
3. Повтор заказа для B2B
4. Авто-уведомления (напоминания через 1 месяц)
5. Загрузка файлов B2B
6. i18n (DE/EN)
7. Создание остальных сайтов:
   - BTT (зонтичный one-page с формой обратной связи)
   - Sciton (визитка)
   - Indiba (визитка)
8. SEO и Legal страницы

**Результат:** Полнофункциональная платформа со всеми фичами

### Этап 4: Тестирование и деплой (Дни 16-20)
**Цель:** Подготовка к production

**Задачи:**
1. E2E тесты (Playwright)
2. Unit тесты
3. Оптимизация (Lighthouse >95)
4. Деплой на Vercel
5. Настройка аналитики (GA4)
6. Документация

**Результат:** Готовый к продакшену проект с документацией

---

## 7. Требования к производительности

### 7.1 Производительность
- Lighthouse Score > 95 по всем метрикам
- Оптимизация изображений (WebP формат)
- Code splitting для уменьшения bundle size
- PWA поддержка

### 7.2 Безопасность
- Все API endpoints защищены аутентификацией
- RLS политики на уровне БД
- Валидация всех пользовательских данных
- Защита от CSRF и XSS атак

---

## 8. Требования к тестированию

### 8.1 Acceptance Criteria
- Успешный заказ → email подтверждение + отображение в кабинете (для B2B)
- Успешный заказ → email подтверждение (для B2C, без кабинета)
- Форма обратной связи → email уведомление
- Загрузка файлов → сохранение и отображение в админ-панели

### 8.2 Тестирование
- **QA заказчика** участвует в тестировании
- E2E тесты критических путей (Playwright)
- Unit тесты утилит (Vitest)
- Проверка всех интеграций (Stripe, DHL, Sendcloud, Resend)

---

## 9. Документация

### 9.1 Техническая документация
- README с инструкциями по запуску проекта
- API документация
- Описание архитектуры
- Инструкции по деплою

### 9.2 Пользовательская документация
- Инструкции для администраторов
- Руководство по использованию админ-панели
- FAQ для пользователей

---

## 10. Риски и митигация

### 10.1 Риски

**Риск 1:** Задержка с фото/видео товаров
- **Митигация:** Использовать placeholder изображения на этапе разработки

**Риск 2:** Сложность интеграций с внешними API
- **Митигация:** Начать с моков API, затем постепенно переходить на реальные интеграции

**Риск 3:** Недостаток времени на реализацию всех функций
- **Митигация:** Приоритизировать MVP функционал, отложить nice-to-have фичи

**Риск 4:** Проблемы с производительностью при большом количестве товаров
- **Митигация:** Использовать пагинацию, индексы в БД, кэширование

---

## 11. Критерии приемки

### 11.1 Функциональные критерии
- ✅ Все 4 сайта работают и доступны
- ✅ BTT: форма обратной связи работает корректно
- ✅ AQ: полный цикл покупки работает для B2C и B2B
- ✅ AQ: B2B кабинет врача с модерацией работает корректно
- ✅ AQ: 10 карточек продуктов отображаются правильно
- ✅ Sciton и Indiba: визитки без e-commerce функционала
- ✅ Админ-панель позволяет управлять всеми сайтами
- ✅ Интеграции с Stripe, DHL/Sendcloud, Resend работают (только для AQ)
- ✅ Email уведомления отправляются корректно
- ✅ i18n работает для DE/EN

### 11.2 Технические критерии
- ✅ Lighthouse Score > 95
- ✅ Все тесты проходят
- ✅ Нет критических ошибок в консоли
- ✅ RLS политики работают корректно
- ✅ Проект деплоится на Vercel без ошибок

### 11.3 Бизнес-критерии
- ✅ Пользователи могут совершать покупки
- ✅ B2B клиенты видят специальные цены
- ✅ Администраторы могут управлять контентом
- ✅ Все Legal страницы присутствуют

---

## 12. Контакты и ответственные

*[Здесь указываются контакты заказчика, разработчиков и других ответственных лиц]*

---

---

## 13. Сроки и бюджет

### 13.1 Целевой срок
- **Целевой срок:** 1 месяц (желательно уложиться)
- **Реалистичность:** Требует уточнения в зависимости от объема работ и приоритетов

### 13.2 Приоритизация
Для ускорения разработки рекомендуется:
- Начать с MVP функционала (AQ e-commerce + B2B кабинет)
- Затем добавить остальные сайты (BTT, Sciton, Indiba)
- Поэтапный запуск с возможностью доработок

---

**Дата создания ТЗ:** [Дата]  
**Версия:** 1.1 (обновлено с учетом ответов заказчика)  
**Статус:** Утверждено

